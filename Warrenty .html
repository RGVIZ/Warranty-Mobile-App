<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warranty Management App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        /* Base page styles */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: 100vh;
            transition: opacity 0.35s, visibility 0.35s;
            visibility: hidden;
            opacity: 0;
        }
        .page.page-current {
            visibility: visible;
            opacity: 1;
            z-index: 10;
        }
        
        /* New Transition Styles */
        #creationPage .form-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
        }
        #creationPage.page-current .form-section {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Floating Action Button Style & Transition */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            z-index: 30;
        }
        .fab-hidden {
            transform: scale(0.5);
            opacity: 0;
        }
        
        /* Header transition for creation page */
        #creationPage header {
            transform: translateY(-100%);
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #creationPage.page-current header {
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-gray-50 overflow-x-hidden">

    <div class="relative mx-auto w-full min-h-screen">

    <!-- =================================================================
         HOME PAGE
    ================================================================== -->
    <div id="homePage" class="page page-current">
        <header class="bg-white sticky top-0 z-20 shadow-sm">
            <div class="max-w-xl mx-auto p-4 space-y-4">
                <h1 class="text-3xl font-bold text-gray-900 text-left">Warranty Claims</h1>
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                    </div>
                    <input type="text" id="globalSearch" placeholder="Search claims..." class="w-full bg-gray-100 border-transparent rounded-full py-2.5 pl-10 pr-4 text-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
            </div>
        </header>

        <main class="max-w-xl mx-auto p-4 pb-28">
            <div id="claimList" class="space-y-3">
                <!-- Claim cards -->
                <div class="claim-card bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer hover:border-indigo-400 transition-all" onclick="viewClaimDetails()" data-search-terms="crankshaft assembly w-102345 automotive approved"><div class="flex justify-between items-start"><div><p class="font-semibold text-gray-800">Crankshaft Assembly</p><p class="text-sm text-gray-500">Claim # W-102345</p></div><span class="text-xs font-medium bg-green-100 text-green-800 px-2.5 py-1 rounded-full">Approved</span></div><div class="mt-3 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-gray-500">Type:</strong> Automotive</span><span><strong class="font-medium text-gray-500">Date:</strong> 2025-08-01</span></div></div>
                <div class="claim-card bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer hover:border-indigo-400 transition-all" onclick="viewClaimDetails()" data-search-terms="industrial motor w-102344 non-automotive pending"><div class="flex justify-between items-start"><div><p class="font-semibold text-gray-800">Industrial Motor</p><p class="text-sm text-gray-500">Claim # W-102344</p></div><span class="text-xs font-medium bg-yellow-100 text-yellow-800 px-2.5 py-1 rounded-full">Pending</span></div><div class="mt-3 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-gray-500">Type:</strong> Non-Automotive</span><span><strong class="font-medium text-gray-500">Date:</strong> 2025-07-29</span></div></div>
                <div class="claim-card bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer hover:border-indigo-400 transition-all" onclick="viewClaimDetails()" data-search-terms="fuel injector w-102342 automotive rejected"><div class="flex justify-between items-start"><div><p class="font-semibold text-gray-800">Fuel Injector</p><p class="text-sm text-gray-500">Claim # W-102342</p></div><span class="text-xs font-medium bg-red-100 text-red-800 px-2.5 py-1 rounded-full">Rejected</span></div><div class="mt-3 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-gray-500">Type:</strong> Automotive</span><span><strong class="font-medium text-gray-500">Date:</strong> 2025-07-25</span></div></div>
                <div class="claim-card bg-white p-4 rounded-lg shadow-sm border border-gray-200 cursor-pointer hover:border-indigo-400 transition-all" onclick="viewClaimDetails()" data-search-terms="water pump w-102340 automotive draft"><div class="flex justify-between items-start"><div><p class="font-semibold text-gray-800">Water Pump</p><p class="text-sm text-gray-500">Claim # W-102340</p></div><span class="text-xs font-medium bg-gray-100 text-gray-800 px-2.5 py-1 rounded-full">Draft</span></div><div class="mt-3 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-gray-500">Type:</strong> Automotive</span><span><strong class="font-medium text-gray-500">Date:</strong> 2025-07-23</span></div></div>
            </div>
             <div id="noResultsMessage" class="hidden text-center py-10"><p class="text-gray-600 font-medium">No claims found</p><p class="text-sm text-gray-400">Try adjusting your search.</p></div>
        </main>
    </div>

    <!-- Floating Action Button to Add New Claim -->
    <button id="fab" onclick="showPage('creationPage')" class="fab bg-indigo-600 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
    </button>

    <!-- =================================================================
         WARRANTY CLAIM CREATION PAGE
    ================================================================== -->
    <div id="creationPage" class="page">
        <header class="bg-white shadow-sm sticky top-0 z-20">
            <div class="max-w-xl mx-auto p-4 flex items-center">
                <button onclick="showPage('homePage')" class="text-gray-500 mr-2 p-2 rounded-full hover:bg-gray-100 hover:text-gray-800">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <h1 class="text-xl font-bold text-gray-900">Create New Claim</h1>
            </div>
        </header>

        <main class="max-w-xl mx-auto p-4 pb-24">
            <form id="warrantyForm" class="space-y-6">

                <!-- Section 1: Basic Details -->
                <div class="form-section bg-white p-5 rounded-lg border border-gray-200 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-6 w-6 text-sm flex items-center justify-center mr-3">1</span>Basic Details</h2>
                    <div class="mt-5 space-y-5">
                        <div><label for="customerType" class="block text-sm font-medium text-gray-700 mb-1">Customer Type *</label><select id="customerType" name="customerType" class="mt-1 block w-full bg-white border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required><option value="">Select Type</option><option value="Automotive">Automotive</option><option value="Non-Automotive">Non-Automotive</option></select></div>
                        <div><label for="itemName" class="block text-sm font-medium text-gray-700 mb-1">Item / Part Name *</label><input type="text" id="itemName" name="itemName" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required></div>
                        <div><label for="itemCode" class="block text-sm font-medium text-gray-700 mb-1">Item / Part Number *</label><input type="text" id="itemCode" name="itemCode" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required></div>
                        <div><label for="serialNumber" class="block text-sm font-medium text-gray-700 mb-1">Serial Number (optional)</label><input type="text" id="serialNumber" name="serialNumber" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"></div>
                    </div>
                </div>

                <!-- Conditional Fields Section -->
                <div id="conditionalFieldsWrapper" class="form-section hidden bg-white p-5 rounded-lg border border-gray-200 shadow-sm">
                    <div id="automotiveFields" class="hidden space-y-5">
                         <h3 class="text-lg font-semibold text-gray-800">Automotive Details</h3>
                        <div><label for="vehicleModel" class="block text-sm font-medium text-gray-700 mb-1">Vehicle Model *</label><input type="text" id="vehicleModel" name="vehicleModel" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"></div>
                        <div><label for="vin" class="block text-sm font-medium text-gray-700 mb-1">Vehicle Identification Number (VIN) *</label><input type="text" id="vin" name="vin" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"></div>
                        <div><label for="kmReading" class="block text-sm font-medium text-gray-700 mb-1">KM Reading at Failure *</label><input type="number" id="kmReading" name="kmReading" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"></div>
                    </div>
                    <div id="nonAutomotiveFields" class="hidden space-y-5">
                        <h3 class="text-lg font-semibold text-gray-800">Non-Automotive Details</h3>
                        <div><label for="applicationType" class="block text-sm font-medium text-gray-700 mb-1">Application Type *</label><input type="text" id="applicationType" placeholder="e.g., Generator, Industrial Motor" name="applicationType" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base"></div>
                    </div>
                </div>

                <!-- Section 2: Reference Images -->
                <div class="form-section bg-white p-5 rounded-lg border border-gray-200 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-6 w-6 text-sm flex items-center justify-center mr-3">2</span>Reference Images</h2>
                    <div class="mt-5 grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div><label class="block text-sm font-medium text-gray-700 text-center">Good / Working Part</label><div class="mt-2 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg"><div class="space-y-1 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg><div class="flex text-sm text-gray-600"><label for="good-part-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500"><span>Choose image</span><input id="good-part-upload" name="good-part-upload" type="file" class="sr-only"></label></div></div></div></div>
                        <div><label class="block text-sm font-medium text-gray-700 text-center">Bad / Failed Part *</label><div class="mt-2 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg"><div class="space-y-1 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg><div class="flex text-sm text-gray-600"><label for="bad-part-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500"><span>Choose image</span><input id="bad-part-upload" name="bad-part-upload" type="file" class="sr-only" required></label></div></div></div></div>
                    </div>
                </div>

                <!-- Section 3: Failure & Invoice Details -->
                 <div class="form-section bg-white p-5 rounded-lg border border-gray-200 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-6 w-6 text-sm flex items-center justify-center mr-3">3</span>Failure & Invoice Details</h2>
                    <div class="mt-5 space-y-5">
                        <div><label for="failureDate" class="block text-sm font-medium text-gray-700 mb-1">Failure Date *</label><input type="date" id="failureDate" name="failureDate" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required></div>
                        <div><label for="defectType" class="block text-sm font-medium text-gray-700 mb-1">Defect Type *</label><select id="defectType" name="defectType" class="mt-1 block w-full bg-white border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required><option value="">Select Defect</option><option value="Manufacturing">Manufacturing</option><option value="Material">Material</option><option value="Wear and Tear">Wear and Tear</option><option value="Other">Other</option></select></div>
                        <div><label for="complaintDescription" class="block text-sm font-medium text-gray-700 mb-1">Customer Verbatim / Complaint Description *</label><textarea id="complaintDescription" name="complaintDescription" rows="4" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" placeholder="Enter the customer's exact words describing the issue..." required></textarea></div>
                        <div><label for="invoiceNumber" class="block text-sm font-medium text-gray-700 mb-1">Invoice Number *</label><input type="text" id="invoiceNumber" name="invoiceNumber" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required></div>
                        <div><label for="invoiceDate" class="block text-sm font-medium text-gray-700 mb-1">Invoice Date *</label><input type="date" id="invoiceDate" name="invoiceDate" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-base" required></div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-section pt-4">
                    <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all">
                        Submit Claim
                    </button>
                </div>
            </form>
        </main>
    </div>
    
    <!-- Simple Message Modal -->
    <div id="messageModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-60 overflow-y-auto h-full w-full z-50 flex items-center justify-center">
        <div class="relative mx-auto p-6 border w-full max-w-sm shadow-xl rounded-2xl bg-white">
            <div class="mt-3 text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100"><svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div>
                <h3 class="text-lg leading-6 font-medium text-gray-900 mt-4" id="modalTitle">Success!</h3>
                <div class="mt-2 px-2 py-3"><p class="text-sm text-gray-500" id="modalMessage">Claim has been submitted successfully.</p></div>
                <div class="items-center px-4 py-3"><button id="okButton" class="px-4 py-2 bg-indigo-600 text-white text-base font-medium rounded-lg w-full shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">OK</button></div>
            </div>
        </div>
    </div>
    </div>

    <script>
        // --- Page Navigation & Animation ---
        const homePage = document.getElementById('homePage');
        const creationPage = document.getElementById('creationPage');
        const fab = document.getElementById('fab');
        const formSections = creationPage.querySelectorAll('.form-section');

        function showPage(pageId) {
            window.scrollTo(0, 0);
            
            if (pageId === 'creationPage') {
                fab.classList.add('fab-hidden');
                homePage.classList.remove('page-current');
                creationPage.classList.add('page-current');
                
                // Staggered animation for form sections
                formSections.forEach((section, index) => {
                    section.style.transitionDelay = `${index * 100}ms`;
                });

            } else { // Navigating back to home
                fab.classList.remove('fab-hidden');
                creationPage.classList.remove('page-current');
                homePage.classList.add('page-current');
            }
        }

        // --- Global Search Logic ---
        const searchInput = document.getElementById('globalSearch');
        const claimCards = document.querySelectorAll('.claim-card');
        const noResultsMessage = document.getElementById('noResultsMessage');

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            let visibleCount = 0;
            claimCards.forEach(card => {
                const searchTerms = card.dataset.searchTerms.toLowerCase();
                if (searchTerms.includes(searchTerm)) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            noResultsMessage.style.display = visibleCount === 0 ? '' : 'none';
        });

        // --- Conditional Fields Logic ---
        const customerTypeSelect = document.getElementById('customerType');
        const conditionalWrapper = document.getElementById('conditionalFieldsWrapper');
        const automotiveFields = document.getElementById('automotiveFields');
        const nonAutomotiveFields = document.getElementById('nonAutomotiveFields');
        const automotiveInputs = automotiveFields.querySelectorAll('input');
        const nonAutomotiveInputs = nonAutomotiveFields.querySelectorAll('input');

        customerTypeSelect.addEventListener('change', function() {
            const selectedType = this.value;
            
            automotiveFields.classList.add('hidden');
            nonAutomotiveFields.classList.add('hidden');
            automotiveInputs.forEach(input => input.required = false);
            nonAutomotiveInputs.forEach(input => input.required = false);
            
            if (selectedType === 'Automotive') {
                conditionalWrapper.classList.remove('hidden');
                automotiveFields.classList.remove('hidden');
                automotiveInputs.forEach(input => input.required = true);
            } else if (selectedType === 'Non-Automotive') {
                conditionalWrapper.classList.remove('hidden');
                nonAutomotiveFields.classList.remove('hidden');
                nonAutomotiveInputs.forEach(input => input.required = true);
            } else {
                conditionalWrapper.classList.add('hidden');
            }
        });

        // --- Form Submission Simulation ---
        const warrantyForm = document.getElementById('warrantyForm');
        warrantyForm.addEventListener('submit', function(event) {
            event.preventDefault();
            showModal('Success!', 'Your warranty claim has been created and submitted for review.');
            warrantyForm.reset();
            customerTypeSelect.dispatchEvent(new Event('change'));
        });
        
        // --- Modal Logic ---
        const modal = document.getElementById('messageModal');
        const okButton = document.getElementById('okButton');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');

        function showModal(title, message) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modal.classList.remove('hidden');
        }

        okButton.addEventListener('click', () => {
            modal.classList.add('hidden');
            showPage('homePage');
        });

        // --- View Claim Details (Placeholder) ---
        function viewClaimDetails() {
            showModal('View Details', 'This feature to view full claim details will be available in a future update.');
        }
    </script>
</body>
</html>
