<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warranty Management App</title>
    <!-- Use Tailwind CSS for a modern, responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        /* Base page styles for smooth transitions */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: 100vh;
            transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
            visibility: hidden;
            opacity: 0;
            z-index: 0;
        }
        .page.page-current {
            visibility: visible;
            opacity: 1;
            z-index: 10;
        }
        
        /* Floating Action Button Style & Transition */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
            z-index: 30;
        }
        .fab-hidden {
            transform: scale(0.5);
            opacity: 0;
            pointer-events: none; /* Prevents clicks on hidden elements */
        }
        
    </style>
</head>
<body class="bg-gray-100 overflow-x-hidden">

    <div class="relative mx-auto w-full min-h-screen">

    <!-- =================================================================
         HOME PAGE
    ================================================================== -->
    <div id="homePage" class="page page-current">
        <header class="bg-white sticky top-0 z-20 shadow-lg">
            <div class="max-w-xl mx-auto p-4 md:p-6">
                <h1 class="text-3xl font-bold text-slate-800 text-left">Warranty Claims</h1>
            </div>
        </header>

        <main class="max-w-xl mx-auto p-4 md:p-6 pb-28">
            <!-- Search bar and filter controls -->
            <div class="flex items-center space-x-4 mb-6">
                <div class="relative flex-grow">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                    </div>
                    <input type="text" id="globalSearch" placeholder="Search claims..." class="w-full bg-white border border-gray-300 rounded-full py-2.5 pl-10 pr-4 text-slate-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                </div>
                <div class="relative">
                    <select id="statusFilter" class="block w-full bg-white border border-gray-300 rounded-full py-2.5 px-4 pr-8 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors appearance-none">
                        <option value="all">All Statuses</option>
                        <option value="approved">Approved</option>
                        <option value="pending">Pending</option>
                        <option value="rejected">Rejected</option>
                        <option value="draft">Draft</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>

            <div id="claimList" class="space-y-4">
                <!-- Claim cards with enhanced styling -->
                <div class="claim-card bg-white p-5 rounded-xl shadow-md border border-gray-200 cursor-pointer hover:border-indigo-500 transition-all duration-200" onclick="showClaimDetails({id: 'W-102345', title: 'Crankshaft Assembly', type: 'Automotive', date: '2025-08-01', status: 'approved', customer: 'Customer A', description: 'Customer states the engine is making a loud knocking sound and has lost power.', vin: '1A2B3C4D5E6F7G8H9', model: 'Model X', mileage: '55,000 miles', warrantyStart: '2024-05-15', dealer: 'Auto Zone', dealerLocation: 'Springfield'})" data-search-terms="crankshaft assembly w-102345 automotive approved"><div class="flex justify-between items-start"><div><p class="font-semibold text-slate-900">Crankshaft Assembly</p><p class="text-sm text-gray-500 mt-1">Claim # W-102345</p></div><span class="text-xs font-bold bg-green-100 text-green-800 px-3 py-1 rounded-full uppercase tracking-wider">Approved</span></div><div class="mt-4 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-slate-500">Type:</strong> Automotive</span><span><strong class="font-medium text-slate-500">Date:</strong> 2025-08-01</span></div></div>
                <div class="claim-card bg-white p-5 rounded-xl shadow-md border border-gray-200 cursor-pointer hover:border-indigo-500 transition-all duration-200" onclick="showClaimDetails({id: 'W-102344', title: 'Industrial Motor', type: 'Non-Automotive', date: '2025-07-29', status: 'pending', customer: 'Customer B', description: 'Motor is overheating and shutting down after 30 minutes of use.', vin: 'N/A', model: 'Heavy Duty 500', mileage: '1,200 hours', warrantyStart: '2023-11-20', dealer: 'Industrial Supply Co.', dealerLocation: 'Shelbyville'})" data-search-terms="industrial motor w-102344 non-automotive pending"><div class="flex justify-between items-start"><div><p class="font-semibold text-slate-900">Industrial Motor</p><p class="text-sm text-gray-500 mt-1">Claim # W-102344</p></div><span class="text-xs font-bold bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full uppercase tracking-wider">Pending</span></div><div class="mt-4 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-slate-500">Type:</strong> Non-Automotive</span><span><strong class="font-medium text-slate-500">Date:</strong> 2025-07-29</span></div></div>
                <div class="claim-card bg-white p-5 rounded-xl shadow-md border border-gray-200 cursor-pointer hover:border-indigo-500 transition-all duration-200" onclick="showClaimDetails({id: 'W-102342', title: 'Fuel Injector', type: 'Automotive', date: '2025-07-25', status: 'rejected', customer: 'Customer C', description: 'Vehicle is misfiring. Diagnosis points to a clogged fuel injector.', vin: '9H8G7F6E5D4C3B2A1', model: 'Sedan Z', mileage: '95,000 miles', warrantyStart: '2021-03-01', dealer: 'Town Motors', dealerLocation: 'Capital City'})" data-search-terms="fuel injector w-102342 automotive rejected"><div class="flex justify-between items-start"><div><p class="font-semibold text-slate-900">Fuel Injector</p><p class="text-sm text-gray-500 mt-1">Claim # W-102342</p></div><span class="text-xs font-bold bg-red-100 text-red-800 px-3 py-1 rounded-full uppercase tracking-wider">Rejected</span></div><div class="mt-4 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-slate-500">Type:</strong> Automotive</span><span><strong class="font-medium text-slate-500">Date:</strong> 2025-07-25</span></div></div>
                <div class="claim-card bg-white p-5 rounded-xl shadow-md border border-gray-200 cursor-pointer hover:border-indigo-500 transition-all duration-200" onclick="showClaimDetails({id: 'W-102340', title: 'Water Pump', type: 'Automotive', date: '2025-07-23', status: 'draft', customer: 'Customer D', description: 'Leak found in the engine bay, source appears to be the water pump.', vin: 'B1B2C3D4E5F6G7H8I', model: 'Truck Y', mileage: '48,000 miles', warrantyStart: '2025-01-10', dealer: 'River City Auto', dealerLocation: 'Riverdale'})" data-search-terms="water pump w-102340 automotive draft"><div class="flex justify-between items-start"><div><p class="font-semibold text-slate-900">Water Pump</p><p class="text-sm text-gray-500 mt-1">Claim # W-102340</p></div><span class="text-xs font-bold bg-gray-100 text-gray-800 px-3 py-1 rounded-full uppercase tracking-wider">Draft</span></div><div class="mt-4 flex justify-between items-center text-sm text-gray-600"><span><strong class="font-medium text-slate-500">Type:</strong> Automotive</span><span><strong class="font-medium text-slate-500">Date:</strong> 2025-07-23</span></div></div>
            </div>
            <!-- Enhanced Empty State Message -->
            <div id="noResultsMessage" class="hidden text-center py-20 px-4">
                <svg class="mx-auto h-16 w-16 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <p class="mt-4 text-gray-600 font-semibold text-lg">No claims found</p>
                <p class="mt-1 text-sm text-gray-400">Try adjusting your search or creating a new claim.</p>
            </div>
        </main>
    </div>

    <!-- Floating Action Button to Add New Claim -->
    <button id="addFab" onclick="newClaim()" class="fab bg-gradient-to-br from-indigo-500 to-indigo-700 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-xl hover:shadow-2xl hover:scale-105 transform transition-all duration-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" /></svg>
    </button>
    
    <!-- Floating Action Button to Edit Claim -->
    <button id="editFab" onclick="editClaim()" class="fab fab-hidden bg-gradient-to-br from-indigo-500 to-indigo-700 text-white w-14 h-14 rounded-full flex items-center justify-center shadow-xl hover:shadow-2xl hover:scale-105 transform transition-all duration-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg>
    </button>

    <!-- =================================================================
         WARRANTY CLAIM CREATION PAGE
    ================================================================== -->
    <div id="creationPage" class="page">
        <header class="bg-white shadow-lg sticky top-0 z-20">
            <div class="max-w-xl mx-auto p-4 md:p-6 flex items-center">
                <button onclick="backToPreviousPage()" class="text-gray-500 mr-2 p-2 rounded-full hover:bg-gray-100 hover:text-indigo-600 transition-colors">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <h1 id="creationPageTitle" class="text-xl font-bold text-slate-800">Create New Claim</h1>
            </div>
        </header>

        <main class="max-w-xl mx-auto p-4 md:p-6 pb-24">
            <form id="warrantyForm" class="space-y-6">
                <!-- Hidden input to store claim ID for editing -->
                <input type="hidden" id="claimId" name="claimId">
                
                <!-- Section 1: Basic Details -->
                <div class="form-section bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                    <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">1</span>Basic Details</h2>
                    <div class="mt-5 space-y-5">
                        <div>
                            <label for="warrantyClaimNumber" class="block text-sm font-medium text-gray-700 mb-1">Warranty Claim Number</label>
                            <input type="text" id="warrantyClaimNumber" name="warrantyClaimNumber" class="mt-1 block w-full bg-gray-100 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none cursor-not-allowed" disabled>
                        </div>
                        <div>
                            <label for="warrantyName" class="block text-sm font-medium text-gray-700 mb-1">Warranty Name <span class="text-red-500">*</span></label>
                            <input type="text" id="warrantyName" name="warrantyName" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" required>
                        </div>
                        <div>
                            <label for="customer" class="block text-sm font-medium text-gray-700 mb-1">Customer <span class="text-red-500">*</span></label>
                            <input type="text" id="customer" name="customer" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" required>
                        </div>
                        <div>
                            <label for="customerReportedDate" class="block text-sm font-medium text-gray-700 mb-1">Customer Reported Date <span class="text-red-500">*</span></label>
                            <input type="date" id="customerReportedDate" name="customerReportedDate" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" required>
                        </div>
                        <div>
                            <label for="customerVerbatim" class="block text-sm font-medium text-gray-700 mb-1">Customer Verbatim / Complaint Description <span class="text-red-500">*</span></label>
                            <textarea id="customerVerbatim" name="customerVerbatim" rows="4" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors" placeholder="Enter the customer's exact words describing the issue..." required></textarea>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Dealer Details -->
                <div class="form-section bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                    <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">2</span>Dealer Details</h2>
                    <div class="mt-5 space-y-5">
                        <div>
                            <label for="dealerName" class="block text-sm font-medium text-gray-700 mb-1">Dealer Name</label>
                            <input type="text" id="dealerName" name="dealerName" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                        </div>
                        <div>
                            <label for="dealerLocation" class="block text-sm font-medium text-gray-700 mb-1">Dealer Location</label>
                            <input type="text" id="dealerLocation" name="dealerLocation" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                        </div>
                    </div>
                </div>

                <!-- Section 3: Vehicle Information -->
                <div class="form-section bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                    <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">3</span>Vehicle Information</h2>
                    <div class="mt-5 space-y-5">
                        <div>
                            <label for="vin" class="block text-sm font-medium text-gray-700 mb-1">VIN Number</label>
                            <input type="text" id="vin" name="vin" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                        </div>
                        <div>
                            <label for="model" class="block text-sm font-medium text-gray-700 mb-1">Vehicle Model</label>
                            <input type="text" id="model" name="model" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                        </div>
                        <div>
                            <label for="mileage" class="block text-sm font-medium text-gray-700 mb-1">Mileage</label>
                            <input type="text" id="mileage" name="mileage" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                        </div>
                        <div>
                            <label for="warrantyStart" class="block text-sm font-medium text-gray-700 mb-1">Warranty Start Date</label>
                            <input type="date" id="warrantyStart" name="warrantyStart" class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors">
                        </div>
                    </div>
                </div>

                <!-- Section 4: Attachments -->
                <div class="form-section bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                    <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">4</span>Attachments</h2>
                    <div class="mt-5 text-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-xl">
                        <div class="space-y-1 text-center">
                            <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
                            <div class="flex text-sm text-gray-600">
                                <label for="file-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500"><span>Upload files</span><input id="file-upload" name="file-upload" type="file" class="sr-only"></label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Section for submitting the form -->
                <div class="form-section bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                    <button type="submit" id="submitButton" class="w-full py-3 px-4 rounded-lg font-semibold text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">
                        Submit Claim
                    </button>
                </div>
            </form>
        </main>
    </div>

    <!-- =================================================================
         WARRANTY CLAIM DETAILS PAGE
    ================================================================== -->
    <div id="claimDetailsPage" class="page">
        <header class="bg-white shadow-lg sticky top-0 z-20">
            <div class="max-w-xl mx-auto p-4 md:p-6 flex items-center">
                <button onclick="showPage('homePage')" class="text-gray-500 mr-2 p-2 rounded-full hover:bg-gray-100 hover:text-indigo-600 transition-colors">
                     <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                </button>
                <h1 id="claimDetailsTitle" class="text-xl font-bold text-slate-800">Claim Details</h1>
            </div>
        </header>
        <main class="max-w-xl mx-auto p-4 md:p-6 pb-24 space-y-6">
            <!-- Section 1: Basic Details -->
            <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">1</span>Basic Details</h2>
                    <span id="detailsClaimStatus" class="text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider"></span>
                </div>
                <div class="space-y-5">
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Claim Number</p>
                        <p id="detailsClaimId" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Customer</p>
                        <p id="detailsClaimCustomer" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Item</p>
                        <p id="detailsClaimTitle" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Date Submitted</p>
                        <p id="detailsClaimDate" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Complaint Description</p>
                        <p id="detailsClaimDescription" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                </div>
            </div>
    
            <!-- Section 2: Dealer Details -->
            <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">2</span>Dealer Details</h2>
                <div class="mt-5 space-y-5">
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Dealer Name</p>
                        <p id="detailsClaimDealer" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Dealer Location</p>
                        <p id="detailsClaimDealerLocation" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                </div>
            </div>
    
            <!-- Section 3: Vehicle Information -->
            <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">3</span>Vehicle Information</h2>
                <div class="mt-5 space-y-5">
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">VIN Number</p>
                        <p id="detailsClaimVin" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Vehicle Model</p>
                        <p id="detailsClaimModel" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Mileage</p>
                        <p id="detailsClaimMileage" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                    <div>
                        <p class="block text-sm font-medium text-gray-700 mb-1">Warranty Start Date</p>
                        <p id="detailsClaimWarrantyStart" class="block w-full bg-gray-50 border border-gray-300 rounded-lg shadow-sm py-3 px-3 text-base text-gray-700 select-none"></p>
                    </div>
                </div>
            </div>

            <!-- Section 4: Attachments -->
            <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-md">
                <h2 class="text-lg font-semibold text-slate-800 flex items-center"><span class="bg-indigo-500 text-white rounded-full h-7 w-7 text-sm flex items-center justify-center mr-3">4</span>Attachments</h2>
                <div class="mt-5 text-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-xl">
                    <div class="space-y-1 text-center">
                        <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></svg>
                        <p class="text-sm text-gray-600 mt-2">No additional attachments for this claim.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- =================================================================
         MODAL (for alerts/messages)
    ================================================================== -->
    <div id="messageModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
        <div id="modalContent" class="bg-white rounded-xl p-8 shadow-2xl max-w-sm w-full transform scale-95 opacity-0 transition-all duration-300">
            <h3 id="modalTitle" class="text-xl font-bold text-slate-800 mb-4"></h3>
            <p id="modalMessage" class="text-gray-600 mb-6"></p>
            <div class="flex justify-end">
                <button id="okButton" class="bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">
                    OK
                </button>
            </div>
        </div>
    </div>

    </div> <!-- End of relative container -->

    <script>
        // --- Global State ---
        let currentClaimData = null;
        let previousPage = 'homePage';

        // --- Page Navigation Logic ---
        const pages = document.querySelectorAll('.page');
        const addFab = document.getElementById('addFab');
        const editFab = document.getElementById('editFab');

        function showPage(pageId) {
            pages.forEach(page => {
                page.classList.remove('page-current');
            });
            document.getElementById(pageId).classList.add('page-current');

            // Manage floating buttons based on the current page
            if (pageId === 'homePage') {
                addFab.classList.remove('fab-hidden');
                editFab.classList.add('fab-hidden');
            } else if (pageId === 'claimDetailsPage') {
                addFab.classList.add('fab-hidden');
                editFab.classList.remove('fab-hidden');
            } else { // For other pages like 'creationPage'
                addFab.classList.add('fab-hidden');
                editFab.classList.add('fab-hidden');
            }
        }
        
        function backToPreviousPage() {
            // For the creation page, navigate back to the previous page
            // which could be the home page (for new claims) or the details page (for editing)
            if (previousPage === 'claimDetailsPage') {
                showPage('claimDetailsPage');
            } else {
                showPage('homePage');
            }
        }

        // --- Search and Filter Logic ---
        document.getElementById('globalSearch').addEventListener('keyup', filterClaims);
        document.getElementById('statusFilter').addEventListener('change', filterClaims);

        function filterClaims() {
            const searchTerm = document.getElementById('globalSearch').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const claimCards = document.querySelectorAll('.claim-card');
            let hasResults = false;

            claimCards.forEach(card => {
                const searchTerms = card.dataset.searchTerms.toLowerCase();
                const status = searchTerms.split(' ')[searchTerms.split(' ').length - 1]; // Grabbing status from the end of the data-search-terms string
                const matchesSearch = searchTerms.includes(searchTerm);
                const matchesStatus = statusFilter === 'all' || status === statusFilter;
                
                if (matchesSearch && matchesStatus) {
                    card.style.display = 'block';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });

            document.getElementById('noResultsMessage').classList.toggle('hidden', hasResults);
        }
        
        // --- New Claim Logic ---
        function newClaim() {
            currentClaimData = null; // Clear out any old data
            document.getElementById('warrantyForm').reset();
            document.getElementById('creationPageTitle').textContent = 'Create New Claim';
            document.getElementById('submitButton').textContent = 'Submit Claim';
            document.getElementById('warrantyClaimNumber').value = 'New Claim (Auto-Generated)';
            
            previousPage = 'homePage';
            showPage('creationPage');
        }

        // --- Dynamic Claim Details Logic ---
        const claimDetailsTitleEl = document.getElementById('detailsClaimTitle');
        const claimDetailsIdEl = document.getElementById('detailsClaimId');
        const claimDetailsCustomerEl = document.getElementById('detailsClaimCustomer');
        const claimDetailsDescriptionEl = document.getElementById('detailsClaimDescription');
        const claimDetailsVinEl = document.getElementById('detailsClaimVin');
        const claimDetailsModelEl = document.getElementById('detailsClaimModel');
        const claimDetailsMileageEl = document.getElementById('detailsClaimMileage');
        const claimDetailsWarrantyStartEl = document.getElementById('detailsClaimWarrantyStart');
        const claimDetailsDealerEl = document.getElementById('detailsClaimDealer');
        const claimDetailsDealerLocationEl = document.getElementById('detailsClaimDealerLocation');
        const claimDetailsDateEl = document.getElementById('detailsClaimDate');
        const claimStatusEl = document.getElementById('detailsClaimStatus');

        function showClaimDetails(claimData) {
            // Store the current claim data in a global variable for editing
            currentClaimData = claimData;

            // Populate the elements with the claimData
            claimDetailsTitleEl.textContent = claimData.title;
            claimDetailsIdEl.textContent = claimData.id;
            claimDetailsCustomerEl.textContent = claimData.customer;
            claimDetailsDescriptionEl.textContent = claimData.description;
            claimDetailsVinEl.textContent = claimData.vin;
            claimDetailsModelEl.textContent = claimData.model;
            claimDetailsMileageEl.textContent = claimData.mileage;
            claimDetailsWarrantyStartEl.textContent = claimData.warrantyStart;
            claimDetailsDealerEl.textContent = claimData.dealer;
            claimDetailsDealerLocationEl.textContent = claimData.dealerLocation;
            claimDetailsDateEl.textContent = claimData.date;

            // Update the status pill color
            claimStatusEl.textContent = claimData.status;
            claimStatusEl.className = 'text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider';
            switch (claimData.status.toLowerCase()) {
                case 'approved':
                    claimStatusEl.classList.add('bg-green-100', 'text-green-800');
                    break;
                case 'pending':
                    claimStatusEl.classList.add('bg-yellow-100', 'text-yellow-800');
                    break;
                case 'rejected':
                    claimStatusEl.classList.add('bg-red-100', 'text-red-800');
                    break;
                case 'draft':
                    claimStatusEl.classList.add('bg-gray-100', 'text-gray-800');
                    break;
            }

            // Show the new details page
            previousPage = 'homePage';
            showPage('claimDetailsPage');
        }
        
        // --- Edit Claim Logic ---
        function editClaim() {
            if (currentClaimData) {
                // Set the form title to "Edit Claim"
                document.getElementById('creationPageTitle').textContent = 'Edit Claim';
                // Change the submit button text
                document.getElementById('submitButton').textContent = 'Save Changes';
                
                // Pre-fill the form with the current claim data
                document.getElementById('claimId').value = currentClaimData.id;
                document.getElementById('warrantyClaimNumber').value = currentClaimData.id;
                document.getElementById('warrantyName').value = currentClaimData.title;
                document.getElementById('customer').value = currentClaimData.customer;
                document.getElementById('customerReportedDate').value = currentClaimData.date;
                document.getElementById('customerVerbatim').value = currentClaimData.description;
                document.getElementById('dealerName').value = currentClaimData.dealer;
                document.getElementById('dealerLocation').value = currentClaimData.dealerLocation;
                document.getElementById('vin').value = currentClaimData.vin;
                document.getElementById('model').value = currentClaimData.model;
                document.getElementById('mileage').value = currentClaimData.mileage;
                document.getElementById('warrantyStart').value = currentClaimData.warrantyStart;

                previousPage = 'claimDetailsPage';
                showPage('creationPage');
            } else {
                showModal("Error", "No claim data found to edit.");
            }
        }

        // --- Form Submission Logic ---
        document.getElementById('warrantyForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission
            
            const claimId = document.getElementById('claimId').value;
            
            if (claimId) {
                // This is an edit operation
                showModal("Success!", "Claim " + claimId + " has been successfully updated.");
            } else {
                // This is a new claim creation
                showModal("Success!", "A new claim has been submitted successfully!");
            }
            
            // Reset the form and navigate back after a small delay for the modal
            setTimeout(() => {
                this.reset();
                showPage('homePage');
            }, 300);
        });

        // --- Modal Logic ---
        const modal = document.getElementById('messageModal');
        const okButton = document.getElementById('okButton');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');
        const modalContent = document.getElementById('modalContent');

        function showModal(title, message) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            modal.classList.remove('hidden');
            // Animate modal content
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        okButton.addEventListener('click', () => {
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300); // Wait for the transition to complete
        });

    </script>
</body>
</html>
